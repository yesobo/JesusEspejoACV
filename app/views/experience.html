<section id="experience" class="row-fluid">
  <aside class="col-lg-3 col-md-3">
    <div class="main-left">
      <div class="sectionTitleWrapper" ng-show="sectionTitleWrapperVisible"> 
          <h2>{{'EXPERIENCE' | translate}}</h2>
          <h5 class="text-primary">{{'WHERE_I_WORKED' | translate}}</h5>
      </div>
      <div id="searchWrapper">
        <search-button search-query="query" on-expand="hideAndExpand()" custom-blur="exitSearchMode()" custom-placeholder="'SEARCH' | translate"></search-button>
      </div>
    </div>
    </aside>
    <div class="col-lg-9 col-md-9 main">
      <div class="row-fluid" ng-repeat="employer in employersDates | orderBy: '-start'">
        <div class="row-fluid" ng-show="(employments | filter:query | filter:employer.employerName).length">
          <article>
            <div class="col-lg-2 col-md-2 periodColumn">
              <div class="period col-lg-12 col-md-12 col-sm-12">
                <div class="periodInterval primary col-lg-12 col-md-12">
                  <span>
                    {{employer.start | myDate}} - 
                  </span>
                  <span>
                    {{employer.end | myDate}}
                  </span>
                </div>
                <div class="periodCount primary-inverse col-lg-12 col-md-12">  
                  <span>{{[employer.start, employer.end] | datesDiff}}</span>
                </div>
              </div>
            </div> 
            <div class="col-lg-9 col-md-9 mainColumn">
               <div class="col-lg-12 col-md-12 row-fluid employerLine">
                  <div class="col-lg-12 col-md-12 employerWrapper">
                    <div class="col-lg-9 col-md-9 employerNameWrapper" style="">
                      <h3 class="employerName">{{employer.employerName}}</h3>
                    </div>
                    <div class="col-lg-3 col-md-3 employerLogoWrapper" style="">
                     <a target="_blank" href="{{employer.webSite}}"><img class="employerLogo" ng-src="{{employer.imageUrl}}"/></a>
                   </div>
                 </div>
               </div>
               <div class="employment panel panel-default" ng-repeat="employment in employments | filter: query | filter: employer.employerName | orderBy: '-start'">
                  <div class="panel-heading">
                    <div class="period-mini">
                      <div class="periodInterval-mini default">
                        <span>
                          {{employment.start | myDate}} -
                        </span>
                        <span>
                          {{employment.end | myDate}}
                        </span>
                      </div>
                      <div class="periodCount default-inverse">  
                        <span>{{[employment.start, employment.end] | datesDiff}}</span>
                      </div>
                    </div>
                    <h4 class="positionTitle panel-title">
                      <span >{{ employment.locator + '.position' | translate }}</span>
                      {{'AT' | translate}} <a target="_blank" href="{{employment.client.webSite}}">{{employment.client.name}}</a>
                    </h4>
                  </div>
                  <div id="positionDetails-{{employment.locator}}" class="panel-collapse collapse">
                    <ul class="panel-body">
                      <experience-details details-obj="employment">
                        <div>{{ detailsObjAttr.locator + '.tasks.' + $index + '.description' | translate }}</div>
                      </experience-details>
                    </ul>
                  </div>
                  <div class="panel-footer panel-footer-arrow">
                    <a  class="my-accordion accordion-toggle collapsed" 
                        data-toggle="collapse" data-parent="#accordion" 
                        href="#positionDetails-{{employment.locator}}" >
                      <span class="glyphicon glyphicon-chevron-down"></span>
                    </a>
                  </div>
                </div>
            <p></p>
            <p></p>
          </div>
        </article>
      </div>
    </div>
  </div>
</section>
