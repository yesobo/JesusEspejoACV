<section id="experience" class="row-fluid menu-section">
  <aside class="col-lg-3 col-md-3 full-height-column subHeader">
    <main-left custom-query="query" custom-title="rawTitle | translate" custom-subtitle="rawSubtitle | translate">
    </main-left>
  </aside>
  <div class="col-lg-9 col-md-9 main full-height-column">
    <div class="row-fluid" ng-repeat="employer in employersDates | orderBy: '-start'">
      <div class="row-fluid" ng-show="(employments | filter:query | filter:employer.employerName).length">
        <article>
          <div class="col-lg-2 col-md-2 periodColumn">
            <div class="period col-lg-12 col-md-12 col-sm-12">
              <div class="periodInterval primary col-lg-12 col-md-12">
                <span>
                  {{employer.start | myDate}} -
                </span>
                <span>
                  {{employer.end | myDate}}
                </span>
              </div>
              <div class="periodCount primary-inverse col-lg-12 col-md-12">
                <span>{{ employersDateDiffMap[employer.employerName].years}}</span>
                <span>{{ employersDateDiffMap[employer.employerName].yearLabel | translate}}</span>
                <span>{{ employersDateDiffMap[employer.employerName].months}}</span>
                <span>{{ employersDateDiffMap[employer.employerName].monthLabel | translate}}</span>
              </div>
            </div>
          </div>
          <div class="col-lg-9 col-md-9 mainColumn">
            <div class="col-lg-12 col-md-12 col-sm-12 row-fluid employerLine">
              <div class="col-lg-12 col-md-12 col-sm-12 employerWrapper">
                <div class="col-lg-9 col-md-9 col-sm-7 employerNameWrapper" style="">
                  <h2 class="employerName">{{employer.employerName | translate}}</h2>
                </div>
                <div class="col-lg-3 col-md-3 col-sm 5 employerLogoWrapper" style="">
                  <a target="_blank" href="{{employer.webSite}}">
                    <img class="employerLogo" ng-src="images/{{employer.imageUrl}}"></a>
                  </div>
                </div>
              </div>
              <div class="employment panel panel-default" ng-repeat="employment in employments | filter: query | filter: employer.employerName | orderBy: '-start'">
                <div class="stickyZone">
                  <div class="panel-heading">
                    <div class="period-mini">
                      <div class="periodInterval-mini default">
                        <span>
                          {{employment.start | myDate}} -
                        </span>
                        <span>
                          {{employment.end | myDate}}
                        </span>
                      </div>
                      <div class="periodCount default-inverse">
                        <span>{{ employmentsDateDiffMap[employment.locator].years}}</span>
                        <span>{{ employmentsDateDiffMap[employment.locator].yearLabel | translate}}</span>
                        <span>{{ employmentsDateDiffMap[employment.locator].months}}</span>
                        <span>{{ employmentsDateDiffMap[employment.locator].monthLabel | translate}}</span>
                      </div>
                    </div>
                    <h3 class="positionTitle panel-title">
                      <span>{{ employment.locator + '.position' | translate }}</span>
                      <span ng-show="employment.client.name">
                        {{'AT' | translate}}
                        <a target="_blank" href="{{employment.client.webSite}}">{{employment.client.name}}</a>
                      </span>
                    </h3>
                  </div>

                  <core-collapse jea-collapse="" id="{{'positionDetails' + employment.locator}}" class="panel-collapse">
                    <ul class="panel-body">
                      <experience-details details-obj="employment"></experience-details>
                    </ul>
                  </core-collapse>
                </div>

                <div class="panel-footer panel-footer-arrow">

                  <div class="round-button-circle">

                    <jea-collapse-button panelid="{{'positionDetails' + employment.locator}}" class="my-accordion accordion-toggle collapsed desktop">
                      <span class="glyphicon glyphicon-chevron-up"></span>
                    </jea-collapse-button>

                    <jea-collapse-button panelid="" ng-click="employment.opened = true;" class="my-accordion accordion-toggle collapsed mobile">
                      <core-icon icon="more-horiz"></core-icon>
                    </jea-collapse-button>

                  </div>

                </div>

                <paper-dialog backdrop="" jea-layer="" ng-opened="employment.opened" transition="core-transition-center" layered="">
                  <core-header-panel mode="waterfall">
                    <div class="core-header">
                      <a ng-click="employment.opened = false">
                        <core-icon icon="close" class="icon-button"></core-icon>
                      </a>
                      <div ng-bind="employment.locator + '.position' | translate">
                      </div>
                    </div>
                    <div class="content" fit="">
                      <ul class="panel-body">
                        <experience-details details-obj="employment">
                        </experience-details>
                      </ul>
                    </div>
                  </core-header-panel>
                </paper-dialog>

              </div>
              <p></p>
              <p></p>
            </div>
        </article>
      </div>
    </div>
    <div class="row-fluid" ng-show="!(!(query) || (employments | filter:query | filter:employer.employerName).length)">
      <div class="notFoundMsg row">
        <span>{{'NO_RESULTS_FOUND'| translate}} {{myText| translate}}</span>
        <span>
          <a ng-click="clickMenu(notFoundRequestedMenu);">
            {{notFoundLinkText | translate}}
          </a>
        </span>
      </div>
    </div>
  </div>
</section>