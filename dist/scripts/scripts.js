"use strict";angular.module("JesusEspejoACVApp",["JesusEspejoACVServices","JesusEspejoACVDirectives","JesusEspejoACVControllers","JesusEspejoACVFilters","pascalprecht.translate"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/aboutme.html"}).when("/experience",{templateUrl:"views/experience.html",controller:"ExperienceCtrl"}).when("/experience/:start",{templateUrl:"views/experience-detail.html",controller:"ExperienceDetailCtrl"}).when("/projects",{templateUrl:"views/experience.html",controller:"ProjectsCtrl"}).otherwise({redirectTo:"/"})}]).config(["$translateProvider",function(a){a.translations("test",{WHO_I_AM:"Quien soy",ABOUT_ME:"Sobre mí",TECHNICAL_SKILLS:"Tecnologías",EXPERTISE:"Tecnologías",EXPERIENCE:"Experiencia",EDUCATION:"Educación",TRAINING:"Cursos",ABOUT_ME_EXPL:"Perfil profesional e Información de Contacto",ABOUT_ME_P1:"Hola, soy Jesús, desarrollador web y amante de las nuevas tecnologías.",ABOUT_ME_P2:"Como verás, he dedicado los últimos años en crear sitios web y disfrutar de las tecnologías web en el trabajo y mi tiempo libre. Me encantaría compartir mis conocimientos contigo, así que no dudes en contactar conmigo si estás interesado.",AT:"en",PRESENT:"Hoy",YEAR:"año",YEARS:"años",MONTH:"mes",MONTHS:"meses",SEARCH:"buscar"}),a.useStaticFilesLoader({prefix:"/data/position_",suffix:".json"}),a.preferredLanguage("en")}]),angular.module("JesusEspejoACVServices",["ng","ngResource"]).factory("SharedData",["$resource","$http",function(a,b){var c=[],d=function(a,b,c){for(var d=null,e=0,f=a.length;f>e;e++)if(a[e][b]===c){d=a[e];break}return d};return{getEmploymentsResource:function(){var b={query:{method:"GET",isArray:!0}};return a("data/employment.json",{},b)},getProjectsResource:function(){var b={query:{method:"GET",isArray:!0}};return a("data/projects.json",{},b)},getSharedDataHttp:function(a){b.get("data/employment.json").success(function(b){return c=b,a(c)})},setSharedData:function(a){angular.copy(a,c)},filterJSON:function(a,b,c){var d=[];for(var e in a)a[e][b]===c&&d.push(a[e]);return d},getEmployersPeriods:function(a){var b,c=[],e={},f={};for(var g in a)b=a[g],e=d(c,"employerName",b.employer.name),e?(e.start>b.start&&(e.start=b.start),e.end<b.end&&(e.end=b.end)):(f={employerName:b.employer.name,webSite:b.employer.webSite,imageUrl:b.employer.imageUrl,start:b.start,end:b.end},c.push(f));return c}}}]),angular.module("JesusEspejoACVControllers",["pascalprecht.translate"]).controller("AppCtrl",["$scope",function(a){a.clickMenu={},a.menuItems={}}]).controller("ExperienceCtrl",["$scope","$window","SharedData","$translate","$parse",function(a,b,c){var d=a.employments=c.getEmploymentsResource().query(function(){a.employersDates=c.getEmployersPeriods(d)});a.buttonContainerClass="",a.rawTitle="EXPERIENCE",a.rawSubtitle="WHERE_I_WORKED",a.collapseScrollTop=0,a.notFoundLinkText="PERSONAL_PROJECTS",a.myText="MY_PLUR",a.notFoundRequestedMenu="PROJECTS"}]).controller("ProjectsCtrl",["$scope","$window","SharedData","$translate","$parse",function(a,b,c){var d=a.employments=c.getProjectsResource().query(function(){a.employersDates=c.getEmployersPeriods(d)});a.buttonContainerClass="",a.rawTitle="PERSONAL_PROJECTS",a.rawSubtitle="FOR_THE_LOVE_OF_ART",a.collapseScrollTop="",a.notFoundLinkText="EXPERIENCE",a.myText="MY_SING",a.notFoundRequestedMenu="EXPERIENCE"}]).controller("ExperienceDetailCtrl",["$scope","$routeParams","SharedData",function(a,b,c){var d=c.getSharedData().query(function(){a.experience=c.filterJSON(d,"start",b.start)[0]})}]),angular.module("JesusEspejoACVFilters",[]).filter("myDate",["$filter",function(a){var b=a("date");return function(a){var c=new Date(a);return""===a&&(c=new Date),b(c.getTime(),"MM-yyyy")}}]).filter("datesDiff",["$translate",function(a){return function(b){var c,d=new Date(b[0]);c=""===b[1]?new Date:new Date(b[1]);var e=12*(c.getFullYear()-d.getFullYear())+c.getMonth()-d.getMonth(),f=Math.floor(e/12),g=e%12,h="";return f>0&&(h+=f+" ",h+=a(f>1?"YEARS":"YEAR"),g>0&&(h+=" ")),g>0&&(h+=g+" ",h+=a(g>1?"MONTHS":"MONTH")),h}}]),angular.module("NavMenuDirective",["pascalprecht.translate"]).directive("navMenu",function(){return{restrict:"E",transclude:!0,scope:{clickMenuItem:"=",navMenuItems:"="},controller:["$scope","$element","$translate","$location",function(a,b,c,d){var e={WHO_I_AM:{position:0,path:"/"},EXPERIENCE:{position:1,path:"/experience"},PROJECTS:{position:2,path:"/projects"}};$(document).ready(function(){$(".nav li").click(function(){$(".nav .active").toggleClass("active"),$(this).toggleClass("active"),$("#resp-menu-btn").click()}),$(document).on("click",".navbar-collapse.in",function(a){$(a.target).is("a")&&$(this).collapse("hide")})}),a.langSwitchImg="images/lang_spanish.png",a.switchLanguage=function(){"en"===c.uses()?(c.uses("es"),a.langSwitchImg="images/lang_english.png"):(c.uses("en"),a.langSwitchImg="images/lang_spanish.png")},a.clickMenuItem=function(a){var c=e[a].position;$($(b.find("li"))).removeClass("active"),$($(b.find("li")[c])).addClass("active"),d.path(e[a].path)},a.navMenuItems=e}],templateUrl:"views/templates/navmenu.html",replace:!0}}),angular.module("SearchButtonDirective",[]).directive("searchButton",function(){return{restrict:"E",transclude:!0,scope:{searchQuery:"=",expandHandler:"&onExpand",blurHandler:"&customBlur",customPlaceholder:"="},controller:["$scope",function(a){a.isCollapsed=!0,a.clear=function(){a.searchQuery="",$(".searchButtonContainer > input").focus()},a.showInput=function(){a.isCollapsed&&($(".searchButtonContainer").toggleClass("mobSearchMode","slow","linear"),a.isCollapsed=!1)},a.hideInput=function(){window.innerWidth<=480&&(a.searchQuery&&""!==a.searchQuery||($(".searchButtonContainer").toggleClass("mobSearchMode","slow","linear"),a.isCollapsed=!0))},a.expand=function(){a.isCollapsed&&(a.expandHandler(),a.showInput(),$(".searchButtonContainer > input").focus())},a.blur=function(){a.hideInput(),a.blurHandler()}}],templateUrl:"views/templates/search-button.html",replace:!0}}).directive("ngBlur",function(){return function(a,b,c){b.bind("blur",function(){a.$apply(c.ngBlur)})}}).directive("ngFocus",["$timeout",function(a){return function(b,c,d){b.$watch(d.ngFocus,function(b){b&&a(function(){c[0].focus()},0,!1)})}}]),angular.module("ExperienceDetailsDirective",[]).directive("experienceDetails",function(){return{restrict:"E",templateUrl:"views/templates/experienceDetails.html",transclude:!0,scope:{detailsObjAttr:"=detailsObj"},link:function(){}}}),angular.module("PanelCollapseButtonDirective",[]).directive("jeaCollapseButton",["$q",function(a){function b(a,b){a.stick_in_parent({offset_top:50,parent:b}).on("sticky_kit:stick",function(){}).on("sticky_kit:unstick",function(){})}function c(a){a.trigger("sticky_kit:detach")}return{restrict:"A",link:function(d,e){var f=a.defer(),g=$(e[0].parentElement.parentElement.parentElement),h=g.children(".stickyZone"),i=h.children(".panel-heading");g.on("shown.bs.collapse",function(){b(i,h,d),$(document.body).trigger("sticky_kit:recalc")}),g.on("hide.bs.collapse",function(){var a=h.offset().top-i.height();$("body").animate({scrollTop:a},500,function(){d.$apply(function(){f.resolve("readyToRecalc")})})}),g.on("hidden.bs.collapse",function(){f.promise.then(function(){$(document.body).trigger("sticky_kit:recalc"),c(i)})})}}}]),angular.module("JesusEspejoACVDirectives",["NavMenuDirective","SearchButtonDirective","ExperienceDetailsDirective","PanelCollapseButtonDirective","MainLeftDirective"]),angular.module("MainLeftDirective",[]).directive("mainLeft",function(){return{restrict:"E",transclude:!0,scope:{customQuery:"=",customTitle:"=",customSubtitle:"="},controller:["$scope","$window",function(a,b){var c=0;a.sectionTitleWrapperVisible=!0,a.activateSearchButton=!0,a.searchButtonInputFocus=!1,a.hideAndExpand=function(d){b.innerWidth<=480&&a.activateSearchButton&&(a.activateSearchButton=!1,d===c?a.sectionTitleWrapperVisible=!0:(a.sectionTitleWrapperVisible=!1,a.searchButtonInputFocus=!0))},a.exitSearchMode=function(){b.innerWidth<=480&&(a.query&&""!==a.query||(a.sectionTitleWrapperVisible=!0,a.activateSearchButton=!0))}}],templateUrl:"views/templates/main-left.html",replace:!0}}),function(){var a,b;a=this.jQuery,b=a(window),a.fn.stick_in_parent=function(c){var d,e,f,g,h,i,j,k;null===c&&(c={}),h=c.sticky_class,e=c.inner_scrolling,g=c.parent,f=c.offset_top,null===f&&(f=0),null===g&&(g=void 0),null===e&&(e=!0),null===h&&(h="is_stuck"),i=function(c,d,i,j,k,l,m){var n,o,p,q,r,s,t,u,v,w;if(!c.data("sticky_kit")){if(c.data("sticky_kit",!0),s=c.parent(),null!==g&&(s=s.closest(g)),!s.length)throw"failed to find stick parent";if(p=!1,n=!1,v=a("<div />"),v.css("position",c.css("position")),t=function(){var a,b,e;return a=parseInt(s.css("border-top-width"),10),b=parseInt(s.css("padding-top"),10),d=parseInt(s.css("padding-bottom"),10),i=s.offset().top+a+b,j=s.height(),e=p?(p=!1,n=!1,c.insertAfter(v).css({position:"",top:"",width:"",bottom:""}),v.detach(),!0):void 0,k=c.offset().top-parseInt(c.css("margin-top"),10)-f,l=c.outerHeight(!0),m=c.css("float"),v.css({width:c.outerWidth(!0),height:l,display:c.css("display"),"vertical-align":c.css("vertical-align"),"float":m}),e?w():void 0},t(),l!==j){q=void 0,r=f,w=function(){var a,g,o,t,u;return o=b.scrollTop(),null!==q&&(g=o-q),q=o,p?(t=o+l+r>j+i,n&&!t&&(n=!1,c.css({position:"fixed",bottom:"",top:r}).trigger("sticky_kit:unbottom")),k>o&&(p=!1,r=f,("left"===m||"right"===m)&&c.insertAfter(v),v.detach(),a={position:"",width:"",top:""},c.css(a).removeClass(h).trigger("sticky_kit:unstick")),e&&(u=b.height(),l>u&&(n||(r-=g,r=Math.max(u-l,r),r=Math.min(f,r),p&&c.css({top:r+"px"}))))):o>k&&(p=!0,a={position:"fixed",top:r},a.width="border-box"===c.css("box-sizing")?c.outerWidth()+"px":c.width()+"px",c.css(a).addClass(h).after(v),("left"===m||"right"===m)&&v.append(c),c.trigger("sticky_kit:stick")),p&&(null===t&&(t=o+l+r>j+i),!n&&t)?(n=!0,"static"===s.css("position")&&s.css({position:"relative"}),c.css({position:"absolute",bottom:d,top:"auto"}).trigger("sticky_kit:bottom")):void 0},u=function(){return t(),w()};var x=function(){b.on("touchmove",w),b.on("scroll",w),b.on("resize",u),a(document.body).on("sticky_kit:recalc",u),c.on("sticky_kit:detach",o),c.off("sticky_kit:attach",x),c.data("sticky_kit",!0),u()};return o=function(){return b.off("touchmove",w),b.off("scroll",w),b.off("resize",u),a(document.body).off("sticky_kit:recalc",u),c.off("sticky_kit:detach",o),c.on("sticky_kit:attach",x),c.data("sticky_kit",!1),c.css({position:"",bottom:"",top:""}),s.position("position",""),p?(c.insertAfter(v).removeClass(h),v.remove()):void 0},b.on("touchmove",w),b.on("scroll",w),b.on("resize",u),a(document.body).on("sticky_kit:recalc",u),c.on("sticky_kit:detach",o),setTimeout(w,0)}}};var l=!1;for(j=0,k=this.length;k>j;j++)d=a(this[j]),l="undefined"==typeof d.data("sticky_kit"),l?i(d):d.trigger("sticky_kit:attach");return this}}.call(this);